"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,r=require("react"),n=(e=r)&&"object"==typeof e&&"default"in e?e.default:e,t=require("three");function u(e,r){if(null==e)return{};var n,t,u={},a=Object.keys(e);for(t=0;t<a.length;t++)r.indexOf(n=a[t])>=0||(u[n]=e[n]);return u}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o="vert",i="frag",c=function(e,r,n){return e[r]=n};function f(e,r){return Object.entries(r).forEach((function(r){var n=r[0],t=r[1],u=t.value,a=t.replaceChunk;u&&e.includes(n)&&(e=e.replace("#include <"+n+">","\n          "+(a?"":"#include <"+n+">")+"\n          "+u+"\n        "))})),e}function d(e,r){return r&&"string"==typeof r&&(e="\n      "+r+"\n      "+e+"\n    "),e}function h(e,r){return Object.entries(r).map((function(e){return"uniform "+e[1].type+" "+e[0]+";"})).join(" ")+"\n    "+e+"\n  "}function l(e,r){return Object.entries(r).map((function(e){return"varying "+e[1].type+" "+e[0]+";"})).join(" ")+"\n    "+e+"\n  "}var v=n.forwardRef((function(e,v){var s=e.children,p=e.varyings,m=void 0===p?{}:p,y=e.uniforms,g=void 0===y?{}:y,b=e.from,j=u(e,["children","varyings","uniforms","from"]),S=r.useRef(g),x=r.useRef(m),O=r.useMemo((function(){return Object.entries(g).reduce((function(e,r){return e[r[0]]=r[1].value,e}),{})}),[g]),k=r.useMemo((function(){return n.Children.toArray(s).reduce((function(e,r){var n,t=null==r||null==(n=r.props)?void 0:n.children;if("string"==typeof t){var u,a=(null==r||null==(u=r.props)?void 0:u.replaceChunk)||!1,c=r.type,f=c.chunkName,d=c.shaderType;[o,i].includes(d)?"Head"===f?e[d].head=e[d].head.concat("\n                  "+t+"\n                "):(e[d][f]||(e[d][f]={value:"",replaceChunk:!1}),e[d][f].replaceChunk=a,e[d][f].value=e[d][f].value.concat("\n                    "+t+"\n                  ")):e.common=e.common.concat("\n                "+t+"\n              ")}return e}),{vert:{head:""},frag:{head:""},common:""})}),[s]),_=r.useMemo((function(){var e=k.vert,r=k.frag,n=k.common,o=e.head,i=u(e,["head"]),v=r.head,s=u(r,["head"]);return new(function(e,r,n){return void 0===e&&(e=t.MeshPhysicalMaterial),void 0===r&&(r={}),function(e){var t,u;function o(n){var t;void 0===n&&(n={}),t=e.call(this,n)||this;var u=Object.keys(r);return t.setValues(n),u.forEach((function(e){c(a(t),"_"+e,{value:r[e]}),Object.defineProperty(a(t),e,{get:function(){return t["_"+e].value},set:function(r){return t["_"+e].value=r}})})),t}return u=e,(t=o).prototype=Object.create(u.prototype),t.prototype.constructor=t,t.__proto__=u,o.prototype.onBeforeCompile=function(e){var t=this,u={get:function(e,r){return function(e,r){return e[r]}(e,r)},set:function(e,r,n){return c(e,r,n),!0}};Object.keys(r).forEach((function(r){e.uniforms[r]=t["_"+r]}));var a=new Proxy(e,u);n&&n(a)},o}(e)}(b,S.current,(function(e){e.fragmentShader=d(e.fragmentShader,v),e.vertexShader=d(e.vertexShader,o),e.fragmentShader=d(e.fragmentShader,n),e.vertexShader=d(e.vertexShader,n),e.fragmentShader=h(e.fragmentShader,S.current),e.vertexShader=h(e.vertexShader,S.current),e.fragmentShader=l(e.fragmentShader,x.current),e.vertexShader=l(e.vertexShader,x.current),e.fragmentShader=f(e.fragmentShader,s),e.vertexShader=f(e.vertexShader,i)})))}),[k,b]);return n.createElement("primitive",Object.assign({ref:v,object:_,attach:"material"},j,O))}));function s(){return null}var p=new Proxy(s,{get:function(e,r){var n=function(e){return e.children};return Object.defineProperty(n,"chunkName",{writable:!0}),Object.defineProperty(n,"shaderType",{writable:!0}),n.chunkName="Body"===r?"project_vertex":r,n.shaderType=o,n}}),m=new Proxy(s,{get:function(e,r){var n=function(e){return e.children};return Object.defineProperty(n,"chunkName",{writable:!0}),Object.defineProperty(n,"shaderType",{writable:!0}),n.chunkName="Body"===r?"dithering_fragment":r,n.shaderType=i,n}});function y(e){return e.children}var g=v;Object.defineProperties(v,{Vert:{get:function(){return p}},Frag:{get:function(){return m}},Common:{get:function(){return y}}}),exports.default=g;
//# sourceMappingURL=component-material.cjs.production.min.js.map
